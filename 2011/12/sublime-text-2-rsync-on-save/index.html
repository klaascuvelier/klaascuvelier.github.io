<!DOCTYPE html>
<html>
    
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <title>
        Klaas Cuvelier
    </title>
    <meta name="description" content="Klaas Cuvelier. Software engineer and runner" />
    

    <link rel="stylesheet" href="/css/main.css" />

    <link href="https://unpkg.com/prismjs@1.20.0/themes/prism-okaidia.css" rel="stylesheet" />
    <link rel="canonical" href="/2011/12/sublime-text-2-rsync-on-save/" />
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>→</text></svg>">


    <script defer data-domain="klaascuvelier.io" src="https://plausible.io/js/plausible.js"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
</head>


    <body class="min-h-100 bg-[#fbfcf1]">
        

    <header class="site-header mb-5 mx-2">
        <div class="pl-2 py-2 flex flex-row justify-start items-center">
            <a class="text-l text-gray-700 visited:text-gray-700 mr-2" href="/">Klaas Cuvelier</a>
            
                <span class="mr-2 text-gray-300">/</span>
               <a class="text-l !text-gray-700 mr-2" href="/blog/">writing</a>
            
        </div>
    </header>


<main class="sm:container sm:mx-auto py-10 pb-5 px-4">
    <div class="post">
  <p>As I’m running an Ubuntu Server in a virtual machine as development test server and I develop on my local environment, I need to keep both repositories in sync.<br>
Before, I shared the code on the development server to my local environment via NFS. The setup worked, but gave some complications with svn, and the auto mounting of the NFS-share after rebooting. So I started looking for a new way to keep all files in sync. I considered sharing via NFS the other way around, but that would make my test server very slow; all php files need to be loaded through NFS and all assets (images, css, javascript) too.<br>
The easiest way to solve my problem was through the good old rsync. As I’m too lazy to run an rsync command every time before I want to load a page from my test-server, I wanted it to be done automatically when I saved a file.<br>
As Sublime Text 2 is an awesome editor which supports plugins, I started surfing around looking for some examples which I then adapted for my own use..<br>
This is the plugin I now use:</p>
<blockquote>
<p>import sublime, sublime_plugin, subprocess</p>
<p>class RsyncOnSave(sublime_plugin.EventListener):<br>
def on_post_save(self, view):</p>
<p>syncProject = “””rsync -avz localpath remotepath &amp;”””<br>
subprocess.call([syncProject],shell=True)</p>
</blockquote>
<p>This code is put in a file named <em>RsyncOnSave.py</em> which is saved a folder named <em>RsyncOnSave</em>, in the Packages folder (for OSX thats: <em>~/Library/Application\ Support/Sublime\ Text\ 2/Packages/</em>). The plugin should automatically be loaded when you (re-)start Sublime Text.<br>
localpath and remotepath obviously are the paths in your case. Note the ampersand at the end of the sync command, which makes sure your editor doesn’t freeze while the command is being executed.</p>
<p>Make sure you’ve put your public ssh-key in the authorized_keys on your server, so you don’t have to give your password when rsyncing.</p>

</div>


<footer class="site-footer mt-10 text-sm">
    &copy; Klaas Cuvelier
</footer>


</main>

    </body>

</html>
